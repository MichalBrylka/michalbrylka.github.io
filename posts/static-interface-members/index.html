<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Static Interface Members - Michał Bryłka | Devexcellence</title><meta name=Description content="This is my cool site"><meta property="og:title" content="Static Interface Members"><meta property="og:description" content="In case you&rsquo;ve lost last 3 years on C# interface design, you&rsquo;d better catch up before asking classic &ldquo;abstract class vs interface&rdquo; on next job interview. Things have changed. Thankfully, for the better"><meta property="og:type" content="article"><meta property="og:url" content="https://michalbrylka.github.io/posts/static-interface-members/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-17T00:00:00+00:00"><meta property="article:modified_time" content="2022-11-17T00:00:00+00:00"><meta property="og:site_name" content="My cool site"><meta name=twitter:card content="summary"><meta name=twitter:title content="Static Interface Members"><meta name=twitter:description content="In case you&rsquo;ve lost last 3 years on C# interface design, you&rsquo;d better catch up before asking classic &ldquo;abstract class vs interface&rdquo; on next job interview. Things have changed. Thankfully, for the better"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://michalbrylka.github.io/posts/static-interface-members/><link rel=prev href=https://michalbrylka.github.io/posts/using-records-in-older-frameworks/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Static Interface Members","inLanguage":"en-us","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/michalbrylka.github.io\/posts\/static-interface-members\/"},"genre":"posts","keywords":"architecture, interface","wordcount":1234,"url":"https:\/\/michalbrylka.github.io\/posts\/static-interface-members\/","datePublished":"2022-11-17T00:00:00+00:00","dateModified":"2022-11-17T00:00:00+00:00","license":"\u0026copy; Copyright 2019-2022 Michał Bryłka","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Michał Bryłka"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Michał Bryłka | Devexcellence"><span class=header-title-pre><i class="fa-solid fa-code"></i></span>Devexcellence</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Michał Bryłka | Devexcellence"><span class=header-title-pre><i class="fa-solid fa-code"></i></span>Devexcellence</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Static Interface Members</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/MichalBrylka title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Michał Bryłka</a></span>&nbsp;<span class=post-category>included in <a href=/categories/csharp/><i class="far fa-folder fa-fw" aria-hidden=true></i>csharp</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2022-11-17>2022-11-17</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;1234 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;6 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#parsing>Parsing</a></li><li><a href=#generic-math-operations>Generic math operations</a></li><li><a href=#static-polymorphism>Static polymorphism</a></li><li><a href=#static-interface-members-in-standard-library>Static Interface Members in standard library</a><ul><li><a href=#parsing-1>Parsing</a></li><li><a href=#generic-math-operation>Generic math operation</a></li></ul></li><li><a href=#sources>Sources</a></li></ul></nav></div></div><div class=content id=content><p>C# 8.0 gave us <a href=https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-8.0/default-interface-methods target=_blank rel="noopener noreffer">default interface methods</a>. They brought us, among other things, the way to introduce new API members without breaking current contracts. Interfaces however still lacked a ability to model &ldquo;static&rdquo; members out-of-the-box. Factories became our usual way of dealing with object creation but how about functionalities that class itself knows best how to handle. What about, say, parsing? Enter C# 11&rsquo;s Static Interface Members</p><h2 id=parsing>Parsing</h2><p>Let&rsquo;s examine the following example:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=k>interface</span> <span class=nc>IMyParsable</span><span class=p>&lt;</span><span class=n>TSelf</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=k>where</span> <span class=n>TSelf</span> <span class=p>:</span> <span class=n>IMyParsable</span><span class=p>&lt;</span><span class=n>TSelf</span><span class=p>&gt;?</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>abstract</span> <span class=n>TSelf</span> <span class=n>Parse</span><span class=p>(</span><span class=n>ReadOnlySpan</span><span class=p>&lt;</span><span class=kt>char</span><span class=p>&gt;</span> <span class=n>s</span><span class=p>,</span> <span class=n>IFormatProvider</span><span class=p>?</span> <span class=n>provider</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>        
</span></span></code></pre></div><p>First that strikes to mind is &ldquo;what do we need such generic guard here?&rdquo;. Read more on <a href=https://blog.stephencleary.com/2022/09/modern-csharp-techniques-1-curiously-recurring-generic-pattern.html target=_blank rel="noopener noreffer">Curiously Recurring Generic Pattern</a>.<div class="details admonition tip open"><div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw" aria-hidden=true></i>CRGP<i class="details-icon fas fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>It get&rsquo;s a little tricky to use Curiously Recurring Generic Pattern correctly to the point that even special syntax <a href=https://github.com/dotnet/csharplang/issues/4436#issuecomment-896981841 target=_blank rel="noopener noreffer">was proposed for it</a> but none of these proposals were championed. For now, do not worry about it, just do not copy and paste such code like there is no tomorrow.</div></div></div></p><p>Rest of the example seems reasonable - this states that types implementing this interface must also contain static <em>Parse</em> method. This method can be used inside interface itself:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>public</span> <span class=k>interface</span> <span class=nc>IMyParsable</span><span class=p>&lt;</span><span class=n>TSelf</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=k>where</span> <span class=n>TSelf</span> <span class=p>:</span> <span class=n>IMyParsable</span><span class=p>&lt;</span><span class=n>TSelf</span><span class=p>&gt;?</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>abstract</span> <span class=n>TSelf</span> <span class=n>Parse</span><span class=p>(</span><span class=n>ReadOnlySpan</span><span class=p>&lt;</span><span class=kt>char</span><span class=p>&gt;</span> <span class=n>s</span><span class=p>,</span> <span class=n>IFormatProvider</span><span class=p>?</span> <span class=n>provider</span><span class=p>);</span> <span class=c1>//provide implementation in implementing types </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// this member does not seem to benefit much from being override-able </span>
</span></span><span class=line><span class=cl>    <span class=c1>// so &#34;virtual&#34; modifier is omitted intentionally</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=n>TSelf</span> <span class=n>InvariantParse</span><span class=p>(</span><span class=n>ReadOnlySpan</span><span class=p>&lt;</span><span class=kt>char</span><span class=p>&gt;</span> <span class=n>s</span><span class=p>)</span> <span class=p>=&gt;</span> 
</span></span><span class=line><span class=cl>        <span class=n>TSelf</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=n>CultureInfo</span><span class=p>.</span><span class=n>InvariantCulture</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//provide standard *Parse methods implementation </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>virtual</span> <span class=n>TSelf</span> <span class=n>Parse</span><span class=p>(</span><span class=kt>string</span> <span class=n>s</span><span class=p>,</span> <span class=n>IFormatProvider</span><span class=p>?</span> <span class=n>provider</span><span class=p>)</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl>        <span class=n>TSelf</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>AsSpan</span><span class=p>(),</span> <span class=n>provider</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>virtual</span> <span class=kt>bool</span> <span class=n>TryParse</span><span class=p>([</span><span class=n>NotNullWhen</span><span class=p>(</span><span class=k>true</span><span class=p>)]</span> <span class=kt>string?</span> <span class=n>s</span><span class=p>,</span> <span class=n>IFormatProvider</span><span class=p>?</span> <span class=n>provider</span><span class=p>,</span> 
</span></span><span class=line><span class=cl><span class=na>        [MaybeNullWhen(false)]</span> <span class=k>out</span> <span class=n>TSelf</span> <span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>result</span> <span class=p>=</span> <span class=k>default</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=n>s</span> <span class=p>==</span> <span class=k>null</span><span class=p>)</span> <span class=k>return</span> <span class=k>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>try</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=p>=</span> <span class=n>TSelf</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>s</span><span class=p>.</span><span class=n>AsSpan</span><span class=p>(),</span> <span class=n>provider</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>catch</span> <span class=p>(</span><span class=n>Exception</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>virtual</span> <span class=kt>bool</span> <span class=n>TryParse</span><span class=p>(</span><span class=n>ReadOnlySpan</span><span class=p>&lt;</span><span class=kt>char</span><span class=p>&gt;</span> <span class=n>s</span><span class=p>,</span> <span class=n>IFormatProvider</span><span class=p>?</span> <span class=n>provider</span><span class=p>,</span> 
</span></span><span class=line><span class=cl><span class=na>        [MaybeNullWhen(false)]</span> <span class=k>out</span> <span class=n>TSelf</span> <span class=n>result</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>try</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=p>=</span> <span class=n>TSelf</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>s</span><span class=p>,</span> <span class=n>provider</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>catch</span> <span class=p>(</span><span class=n>Exception</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>result</span> <span class=p>=</span> <span class=k>default</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>       
</span></span></code></pre></div><p>Let&rsquo;s implement a simple class that will encapsulate notion of words that can be serialized in string separated with commas</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>record</span> <span class=nc>CommaSeparatedWords</span><span class=p>(</span><span class=n>IReadOnlyList</span><span class=p>&lt;</span><span class=kt>string</span><span class=p>&gt;</span> <span class=n>Words</span><span class=p>)</span> <span class=p>:</span> <span class=n>IMyParsable</span><span class=p>&lt;</span><span class=n>CommaSeparatedWords</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=n>CommaSeparatedWords</span> <span class=n>Parse</span><span class=p>(</span><span class=n>ReadOnlySpan</span><span class=p>&lt;</span><span class=kt>char</span><span class=p>&gt;</span> <span class=n>s</span><span class=p>,</span> <span class=n>IFormatProvider</span><span class=p>?</span> <span class=n>provider</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>words</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=kt>string</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>word</span> <span class=k>in</span> <span class=n>s</span><span class=p>.</span><span class=n>Split</span><span class=p>(</span><span class=sc>&#39;,&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>            <span class=n>words</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>word</span><span class=p>.</span><span class=n>ToString</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span><span class=p>(</span><span class=n>words</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>override</span> <span class=kt>string</span> <span class=n>ToString</span><span class=p>()</span> <span class=p>=&gt;</span> <span class=kt>string</span><span class=p>.</span><span class=n>Join</span><span class=p>(</span><span class=s>&#34;,&#34;</span><span class=p>,</span> <span class=n>Words</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p><em>CommaSeparatedWords</em> record will have other <em>Parse</em> and <em>TryParse</em> methods but calling them directly will not be possible i.e. <code>CommaSeparatedWords.TryParse(...)</code>. So how can one effectively use them? Answer remains in generic guards.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>static</span> <span class=k>class</span> <span class=nc>MyParsableHelper</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=n>T</span> <span class=n>ParseAs</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;(</span><span class=k>this</span> <span class=kt>string</span> <span class=n>text</span><span class=p>,</span> <span class=n>IFormatProvider</span><span class=p>?</span> <span class=n>provider</span> <span class=p>=</span> <span class=k>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>where</span> <span class=n>T</span> <span class=p>:</span> <span class=n>IMyParsable</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>=&gt;</span> <span class=n>T</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>text</span><span class=p>,</span> <span class=n>provider</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//usage:</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>words</span> <span class=p>=</span> <span class=s>&#34;A,B,C&#34;</span><span class=p>.</span><span class=n>ParseAs</span><span class=p>&lt;</span><span class=n>CommaSeparatedWords</span><span class=p>&gt;();</span>
</span></span></code></pre></div><p>But more probably this feature is more useful when wrapped in a class that delegates appropriate functionality. This class will parse line contents while delegating line parsing to <em>CommaSeparatedWords</em>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>record</span> <span class=nc>Lines</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;(</span><span class=n>IReadOnlyList</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=n>Values</span><span class=p>)</span> <span class=p>:</span> <span class=n>IMyParsable</span><span class=p>&lt;</span><span class=n>Lines</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;&gt;</span>
</span></span><span class=line><span class=cl>    <span class=k>where</span> <span class=n>T</span> <span class=p>:</span> <span class=n>IMyParsable</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=n>Lines</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=n>Parse</span><span class=p>(</span><span class=n>ReadOnlySpan</span><span class=p>&lt;</span><span class=kt>char</span><span class=p>&gt;</span> <span class=n>s</span><span class=p>,</span> <span class=n>IFormatProvider</span><span class=p>?</span> <span class=n>provider</span> <span class=p>=</span> <span class=k>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>splitText</span> <span class=p>=</span> <span class=n>s</span><span class=p>.</span><span class=n>EnumerateLines</span><span class=p>();</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>lines</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>line</span> <span class=k>in</span> <span class=n>splitText</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>lines</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>T</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>line</span><span class=p>,</span> <span class=n>provider</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>//this also works in this context</span>
</span></span><span class=line><span class=cl>        <span class=c1>//var canParse = T.TryParse(&#34;&#34;, provider, out var result);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span><span class=p>(</span><span class=n>lines</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>override</span> <span class=kt>string</span> <span class=n>ToString</span><span class=p>()</span> <span class=p>=&gt;</span> <span class=kt>string</span><span class=p>.</span><span class=n>Join</span><span class=p>(</span><span class=n>Environment</span><span class=p>.</span><span class=n>NewLine</span><span class=p>,</span> <span class=n>Values</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>So the following code will properly parse</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>parsedLines</span> <span class=p>=</span> <span class=n>Lines</span><span class=p>&lt;</span><span class=n>CommaSeparatedWords</span><span class=p>&gt;.</span><span class=n>Parse</span><span class=p>(</span><span class=s>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s></span>    <span class=n>Ala</span><span class=p>,</span><span class=n>has</span><span class=p>,</span><span class=n>a</span><span class=p>,</span><span class=n>cat</span>
</span></span><span class=line><span class=cl>    <span class=n>Cat</span><span class=p>,</span><span class=n>has</span><span class=p>,</span><span class=n>Ala</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;&#34;&#34;);
</span></span></span></code></pre></div><p>as can be seen here:</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/posts/static-interface-members/lines-comma-separated-words.png data-srcset="/posts/static-interface-members/lines-comma-separated-words.png, /posts/static-interface-members/lines-comma-separated-words.png 1.5x, /posts/static-interface-members/lines-comma-separated-words.png 2x" data-sizes=auto alt=/posts/static-interface-members/lines-comma-separated-words.png title=lines-comma-separated-words width=557 height=213></p><h2 id=generic-math-operations>Generic math operations</h2><p>Let&rsquo;s consider the following example</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=k>interface</span> <span class=nc>IAdditionOperation</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=k>where</span> <span class=n>T</span> <span class=p>:</span> <span class=n>IAdditionOperation</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>abstract</span> <span class=n>T</span> <span class=n>Zero</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>abstract</span> <span class=n>T</span> <span class=k>operator</span> <span class=p>+(</span><span class=n>T</span> <span class=n>lhs</span><span class=p>,</span> <span class=n>T</span> <span class=n>rhs</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>record</span> <span class=nc>struct</span> <span class=n>IntWrapper</span><span class=p>(</span><span class=kt>int</span> <span class=n>Value</span><span class=p>)</span> <span class=p>:</span> <span class=n>IAdditionOperation</span><span class=p>&lt;</span><span class=n>IntWrapper</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=n>IntWrapper</span> <span class=n>Zero</span> <span class=p>=&gt;</span> <span class=k>new</span><span class=p>(</span><span class=m>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=n>IntWrapper</span> <span class=k>operator</span> <span class=p>+(</span><span class=n>IntWrapper</span> <span class=n>lhs</span><span class=p>,</span> <span class=n>IntWrapper</span> <span class=n>rhs</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=k>new</span><span class=p>(</span><span class=n>lhs</span><span class=p>.</span><span class=n>Value</span> <span class=p>+</span> <span class=n>rhs</span><span class=p>.</span><span class=n>Value</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//we can now write universal &#34;sum&#34; method for all IAdditionOperation&lt;T&gt;</span>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=n>T</span> <span class=n>Sum</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;(</span><span class=n>IEnumerable</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=n>numbers</span><span class=p>)</span> <span class=k>where</span> <span class=n>T</span> <span class=p>:</span> <span class=n>IAdditionOperation</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>var</span> <span class=n>sum</span> <span class=p>=</span> <span class=n>T</span><span class=p>.</span><span class=n>Zero</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>number</span> <span class=k>in</span> <span class=n>numbers</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>sum</span> <span class=p>+=</span> <span class=n>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>sum</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//or:</span>
</span></span><span class=line><span class=cl>    <span class=c1>//return numbers.Aggregate(T.Zero, (acc, current) =&gt; acc + current);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//which can be used:</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>sum</span> <span class=p>=</span> <span class=n>Sum</span><span class=p>(</span><span class=n>Enumerable</span><span class=p>.</span><span class=n>Range</span><span class=p>(</span><span class=m>1</span><span class=p>,</span> <span class=m>10</span><span class=p>).</span><span class=n>Select</span><span class=p>(</span><span class=n>i</span> <span class=p>=&gt;</span> <span class=k>new</span> <span class=n>IntWrapper</span><span class=p>(</span><span class=n>i</span><span class=p>)));</span>
</span></span></code></pre></div><p>We could easily create other number wrappers now (for <code>float</code>, <code>long</code> etc.) but that would be pointless. While this example is great for demonstration, one could argue that, in order for it to work, such generic interfaces should be built into .NET number type system. They are. In next post we will explore these concepts.</p><h2 id=static-polymorphism>Static polymorphism</h2><p>Distinction between shadowed and &ldquo;new&rdquo; overrides for instance members existed in C# practically since it&rsquo;s inception. Let&rsquo;s examine how it&rsquo;s defined for static members</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cs data-lang=cs><span class=line><span class=cl><span class=k>interface</span> <span class=nc>IValues</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>static</span> <span class=k>abstract</span> <span class=kt>string</span> <span class=n>Static</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>string</span> <span class=n>Instance</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>Base</span> <span class=p>:</span> <span class=n>IValues</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=kt>string</span> <span class=n>Static</span> <span class=p>=&gt;</span> <span class=s>&#34;Base&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>string</span> <span class=n>Instance</span> <span class=p>=&gt;</span> <span class=s>&#34;Base&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//this class shadows members</span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>ShadowImpl</span> <span class=p>:</span> <span class=n>Base</span><span class=p>,</span> <span class=n>IValues</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=kt>string</span> <span class=n>Static</span> <span class=p>=&gt;</span> <span class=s>&#34;Shadow&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>string</span> <span class=n>Instance</span> <span class=p>=&gt;</span> <span class=s>&#34;Shadow&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c1>//this class defines &#34;new&#34; overrides </span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>NewImpl</span> <span class=p>:</span> <span class=n>Base</span><span class=p>,</span> <span class=n>IValues</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=k>new</span> <span class=kt>string</span> <span class=n>Static</span> <span class=p>=&gt;</span> <span class=s>&#34;New&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>new</span> <span class=kt>string</span> <span class=n>Instance</span> <span class=p>=&gt;</span> <span class=s>&#34;New&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//we can now use generic method to print values</span>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=k>void</span> <span class=n>Print</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;(</span><span class=n>T</span> <span class=n>t</span><span class=p>)</span> <span class=k>where</span> <span class=n>T</span> <span class=p>:</span> <span class=n>IValues</span>
</span></span><span class=line><span class=cl>    <span class=p>=&gt;</span> <span class=n>Console</span><span class=p>.</span><span class=n>WriteLine</span><span class=p>(</span><span class=s>&#34;{0,6}, {1,6}&#34;</span><span class=p>,</span> <span class=n>T</span><span class=p>.</span><span class=n>Static</span><span class=p>,</span> <span class=n>t</span><span class=p>.</span><span class=n>Instance</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//and these are our results </span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>@base</span> <span class=p>=</span> <span class=k>new</span> <span class=n>Base</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>shadow</span> <span class=p>=</span> <span class=k>new</span> <span class=n>ShadowImpl</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>@new</span> <span class=p>=</span> <span class=k>new</span> <span class=n>NewImpl</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>Base</span> <span class=n>shadowAsBase</span> <span class=p>=</span> <span class=n>shadow</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=n>Base</span> <span class=n>newAsBase</span> <span class=p>=</span> <span class=n>@new</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>Print</span><span class=p>(</span><span class=n>@base</span><span class=p>);</span>       <span class=c1>//   Base,   Base</span>
</span></span><span class=line><span class=cl><span class=n>Print</span><span class=p>(</span><span class=n>shadow</span><span class=p>);</span>      <span class=c1>// Shadow, Shadow</span>
</span></span><span class=line><span class=cl><span class=n>Print</span><span class=p>(</span><span class=n>@new</span><span class=p>);</span>        <span class=c1>//    New,    New</span>
</span></span><span class=line><span class=cl><span class=n>Print</span><span class=p>(</span><span class=n>shadowAsBase</span><span class=p>);</span><span class=c1>//   Base, Shadow</span>
</span></span><span class=line><span class=cl><span class=n>Print</span><span class=p>(</span><span class=n>newAsBase</span><span class=p>);</span>   <span class=c1>//   Base,    New</span>
</span></span></code></pre></div><p>So these examples show that we have static polymorphism in C# now 💖. Whether you need that it&rsquo;s up to you but I wonder when such concepts will find their ways into job interviews 😀</p><h2 id=static-interface-members-in-standard-library>Static Interface Members in standard library</h2><h3 id=parsing-1>Parsing</h3><p>One can assume that parsing is such important feature that appropriate interface should exist in standard library. It does, in 2 flavours in fact:</p><ul><li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.iparsable-1?view=net-7.0" target=_blank rel="noopener noreffer">IParsable</a></li><li><a href="https://learn.microsoft.com/en-us/dotnet/api/system.ispanparsable-1?view=net-7.0" target=_blank rel="noopener noreffer">ISpanParsable</a></li></ul><p>with later obviously extending the former. One can check, but most, if not all (with notable exception of <strong>bool</strong>), common types like <strong>int</strong>, <strong>float</strong>, <strong>byte</strong> already implement both of these interfaces.</p><p>This in turn allows us to use them a generic guards to implement a <a href=https://en.wikipedia.org/wiki/Comma-separated_values target=_blank rel="noopener noreffer">CSV</a> parser for lines with 3 constituents and a class that will store/parse whole CSV file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=k>readonly</span> <span class=k>record</span> <span class=nc>struct</span> <span class=n>CsvLine</span><span class=p>&lt;</span><span class=n>T1</span><span class=p>,</span> <span class=n>T2</span><span class=p>,</span> <span class=n>T3</span><span class=p>&gt;(</span><span class=n>T1</span> <span class=n>Item1</span><span class=p>,</span> <span class=n>T2</span> <span class=n>Item2</span><span class=p>,</span> <span class=n>T3</span> <span class=n>Item3</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>    <span class=p>:</span> <span class=n>ISpanParsable</span><span class=p>&lt;</span><span class=n>CsvLine</span><span class=p>&lt;</span><span class=n>T1</span><span class=p>,</span> <span class=n>T2</span><span class=p>,</span> <span class=n>T3</span><span class=p>&gt;&gt;</span>
</span></span><span class=line><span class=cl>     <span class=k>where</span> <span class=n>T1</span> <span class=p>:</span> <span class=n>ISpanParsable</span><span class=p>&lt;</span><span class=n>T1</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>     <span class=k>where</span> <span class=n>T2</span> <span class=p>:</span> <span class=n>ISpanParsable</span><span class=p>&lt;</span><span class=n>T2</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>     <span class=k>where</span> <span class=n>T3</span> <span class=p>:</span> <span class=n>ISpanParsable</span><span class=p>&lt;</span><span class=n>T3</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=n>CsvLine</span><span class=p>&lt;</span><span class=n>T1</span><span class=p>,</span> <span class=n>T2</span><span class=p>,</span> <span class=n>T3</span><span class=p>&gt;</span> <span class=n>Parse</span><span class=p>(</span><span class=n>ReadOnlySpan</span><span class=p>&lt;</span><span class=kt>char</span><span class=p>&gt;</span> <span class=n>s</span><span class=p>,</span> <span class=n>IFormatProvider</span><span class=p>?</span> <span class=n>provider</span> <span class=p>=</span> <span class=k>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// For some reasons ReadOnlySpan&lt;char&gt; does not possess a string.Split() equivalent. </span>
</span></span><span class=line><span class=cl>        <span class=c1>// This example uses the SpanSplit approach from:</span>
</span></span><span class=line><span class=cl>        <span class=c1>// https://www.nuget.org/packages/Nemesis.TextParsers/</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>enumerator</span> <span class=p>=</span> <span class=n>s</span><span class=p>.</span><span class=n>Split</span><span class=p>(</span><span class=sc>&#39;,&#39;</span><span class=p>).</span><span class=n>GetEnumerator</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(!</span><span class=n>enumerator</span><span class=p>.</span><span class=n>MoveNext</span><span class=p>())</span> <span class=k>throw</span> <span class=k>new</span><span class=p>(</span><span class=s>&#34;No element at 1st position&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>t1</span> <span class=p>=</span> <span class=n>T1</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>enumerator</span><span class=p>.</span><span class=n>Current</span><span class=p>,</span> <span class=n>CultureInfo</span><span class=p>.</span><span class=n>InvariantCulture</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(!</span><span class=n>enumerator</span><span class=p>.</span><span class=n>MoveNext</span><span class=p>())</span> <span class=k>throw</span> <span class=k>new</span><span class=p>(</span><span class=s>&#34;No element at 2nd position&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>t2</span> <span class=p>=</span> <span class=n>T2</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>enumerator</span><span class=p>.</span><span class=n>Current</span><span class=p>,</span> <span class=n>CultureInfo</span><span class=p>.</span><span class=n>InvariantCulture</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(!</span><span class=n>enumerator</span><span class=p>.</span><span class=n>MoveNext</span><span class=p>())</span> <span class=k>throw</span> <span class=k>new</span><span class=p>(</span><span class=s>&#34;No element at 3rd position&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>t3</span> <span class=p>=</span> <span class=n>T3</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>enumerator</span><span class=p>.</span><span class=n>Current</span><span class=p>,</span> <span class=n>CultureInfo</span><span class=p>.</span><span class=n>InvariantCulture</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span><span class=p>(</span><span class=n>t1</span><span class=p>,</span> <span class=n>t2</span><span class=p>,</span> <span class=n>t3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//remaining Parse methods omitted for brevity</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>record</span> <span class=nc>CsvFile</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;(</span><span class=n>IReadOnlyList</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=n>Lines</span><span class=p>)</span> <span class=p>:</span> <span class=n>ISpanParsable</span><span class=p>&lt;</span><span class=n>CsvFile</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;&gt;</span>
</span></span><span class=line><span class=cl>    <span class=k>where</span> <span class=n>T</span> <span class=p>:</span> <span class=n>ISpanParsable</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=k>static</span> <span class=n>CsvFile</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;</span> <span class=n>Parse</span><span class=p>(</span><span class=n>ReadOnlySpan</span><span class=p>&lt;</span><span class=kt>char</span><span class=p>&gt;</span> <span class=n>s</span><span class=p>,</span> <span class=n>IFormatProvider</span><span class=p>?</span> <span class=n>provider</span> <span class=p>=</span> <span class=k>null</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>splitText</span> <span class=p>=</span> <span class=n>s</span><span class=p>.</span><span class=n>EnumerateLines</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>var</span> <span class=n>lines</span> <span class=p>=</span> <span class=k>new</span> <span class=n>List</span><span class=p>&lt;</span><span class=n>T</span><span class=p>&gt;();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>foreach</span> <span class=p>(</span><span class=kt>var</span> <span class=n>line</span> <span class=k>in</span> <span class=n>splitText</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>lines</span><span class=p>.</span><span class=n>Add</span><span class=p>(</span><span class=n>T</span><span class=p>.</span><span class=n>Parse</span><span class=p>(</span><span class=n>line</span><span class=p>,</span> <span class=n>provider</span><span class=p>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span><span class=p>(</span><span class=n>lines</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>//remaining Parse methods omitted for brevity</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>This will allow parsing to be done in following fashion:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=kt>var</span> <span class=n>parsedNumbers</span> <span class=p>=</span> <span class=n>CsvFile</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>&gt;.</span><span class=n>Parse</span><span class=p>(</span><span class=s>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s></span>    <span class=m>11</span>
</span></span><span class=line><span class=cl>    <span class=m>22</span>
</span></span><span class=line><span class=cl>    <span class=m>33</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;&#34;&#34;);
</span></span></span><span class=line><span class=cl><span class=s></span>
</span></span><span class=line><span class=cl><span class=c1>//or more advanced example</span>
</span></span><span class=line><span class=cl><span class=kt>var</span> <span class=n>parsedStructs</span> <span class=p>=</span> <span class=n>CsvFile</span><span class=p>&lt;</span><span class=n>CsvLine</span><span class=p>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>float</span><span class=p>,</span> <span class=kt>char</span><span class=p>&gt;&gt;.</span><span class=n>Parse</span><span class=p>(</span><span class=s>&#34;&#34;&#34;
</span></span></span><span class=line><span class=cl><span class=s></span>    <span class=m>11</span><span class=p>,</span><span class=m>1.1</span><span class=p>,</span><span class=n>A</span>
</span></span><span class=line><span class=cl>    <span class=m>22</span><span class=p>,</span><span class=m>2.2</span><span class=p>,</span><span class=n>B</span>
</span></span><span class=line><span class=cl>    <span class=m>33</span><span class=p>,</span><span class=m>3.3</span><span class=p>,</span><span class=n>C</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;&#34;&#34;);
</span></span></span></code></pre></div><h3 id=generic-math-operation>Generic math operation</h3><p>This topic is quite comprehensive. Stay tuned for a separate blog post. It&rsquo;s scheduled for 5th of December 2022.</p><h2 id=sources>Sources</h2><ul><li><a href=https://gist.github.com/MichalBrylka/faf99aed6a2c307a5cb9f763bed5e241 target=_blank rel="noopener noreffer">Static Interface Members</a></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2022-11-17</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://michalbrylka.github.io/posts/static-interface-members/ data-title="Static Interface Members" data-via=michal_brylka data-hashtags=architecture,interface><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://michalbrylka.github.io/posts/static-interface-members/ data-hashtag=architecture><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://michalbrylka.github.io/posts/static-interface-members/ data-title="Static Interface Members"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://michalbrylka.github.io/posts/static-interface-members/ data-title="Static Interface Members"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="Share on 微博" data-sharer=weibo data-url=https://michalbrylka.github.io/posts/static-interface-members/ data-title="Static Interface Members"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/architecture/>architecture</a>,&nbsp;<a href=/tags/interface/>interface</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/using-records-in-older-frameworks/ class=prev rel=prev title="Using Records in legacy .NET Frameworks"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Using Records in legacy .NET Frameworks</a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.107.0">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://github.com/MichalBrylka target=_blank>Michał Bryłka</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script></body></html>